import{IntChainIdTypedDataV4Signer as e,TypedDataVersionedSigner as t,domain as r}from"./index-4d43fb34.js";import{E as n,C as o,s as i,a as s,b as c,S as a,c as u}from"./index-2075fe75.js";import"cross-fetch/polyfill";import"limiter";import"exponential-backoff";import"ethers";import"graphql-request";import"@openzeppelin/merkle-tree";const d=function(e,t,r){return f({orderUids:e,chainId:t},l,r)},h=function(e,t,r){return f({orderUid:e,chainId:t},g,r)},m=function(e,t,r){return f({order:e,chainId:t},p,r)},f=function(r,i,s,c="v4"){try{let u;function a(e){if(u)return e;const t=m?.data;return{signature:t?.toString()||"",signingScheme:d}}const d="eth_sign"===c?n.ETHSIGN:n.EIP712;let h,m=null;try{switch(c){case"default":case"v3":h=new t(s);break;case"int_v4":h=new e(s);break;default:h=s}}catch(g){throw console.error("Wallet not supported:",g),new o("Wallet not supported")}const l=function(e,t){try{var n=Promise.resolve(i({...r,signer:h,signingScheme:d})).then(function(e){m=e})}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(0,function(e){if(void 0===(t=e).code&&void 0===t.message)throw console.error(e),e;var t;const n=[w,y].some(t=>[e.message,e.toString()].some(e=>t.test(e)));if(e.code!==P&&!n){if(_.test(e.message)){const e=f(r,i,s,"int_v4");return u=1,e}if(e.code===v){const e=f(r,i,s,"eth_sign");return u=1,e}if(I.test(e.message)){const e=f(r,i,s,"v3");return u=1,e}if(S.test(e.message)){const e=f(r,i,s,"eth_sign");return u=1,e}throw console.error(e),e}switch(c){case"v4":const t=f(r,i,s,"default");return u=1,t;case"default":const n=f(r,i,s,"v3");return u=1,n;case"v3":const o=f(r,i,s,"eth_sign");return u=1,o;default:throw e}});return Promise.resolve(l&&l.then?l.then(a):a(l))}catch(p){return Promise.reject(p)}},l=function(e){try{const{chainId:t,signer:r,signingScheme:n,orderUids:o}=e,s=j(t);return Promise.resolve(i(s,o,r,E[n]))}catch(e){return Promise.reject(e)}},g=function(e){try{const{chainId:t,signer:r,signingScheme:n,orderUid:o}=e,i=j(t);return Promise.resolve(s(i,o,r,E[n]))}catch(e){return Promise.reject(e)}},p=function(e){try{const{chainId:t,signer:r,order:n,signingScheme:o}=e,i=j(t);return Promise.resolve(c(i,n,r,E[o]))}catch(e){return Promise.reject(e)}},v=-32603,P=-32601,w=/Method not found/i,I=/eth_signTypedData_v4 does not exist/i,S=/eth_signTypedData_v3 does not exist/i,y=/RPC request failed/i,_=/provided chainid .* must match the active chainid/i,E={[n.EIP712]:a.EIP712,[n.ETHSIGN]:a.ETHSIGN};function j(e){const t=u[e];if(!t)throw new o("Unsupported network. Settlement contract is not deployed");return r(e,t)}export{j as getDomain,m as signOrder,h as signOrderCancellation,d as signOrderCancellations};
//# sourceMappingURL=utils-e483a037.js.map
